<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>I Ching Hexagram Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 30px;
    }

    .line-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 70px;
      margin-bottom: 20px;
    }

    select {
      padding: 5px;
      font-size: 14px;
    }

    .line-box {
      width: 150px;
      height: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .solid-line {
      background-color: black;
      width: 100%;
      height: 20px;
      border-radius: 4px;
    }

    .broken-line {
      display: flex;
      justify-content: space-between;
      width: 100%;
      height: 20px;
    }

    .broken-segment {
      width: 45%;
      height: 100%;
      background-color: black;
      border-radius: 4px;
    }

    .solid-line.blue,
    .broken-segment.blue {
      background-color: blue;
    }

    .hexagram-name-container {
      display: flex;
      justify-content: center;
      gap: 150px;
      margin-top: 10px;
      font-size: 18px;
      font-weight: bold;
      transform: translateX(70px);
    }

    #question-input {
      width: 50%;
      padding: 20px;
      font-size: 16px;
      margin-bottom: 20px;
    }

    #auto-button {
      margin-bottom: 30px; /* ê°„ê²© ì¶”ê°€ */
    }
  </style>
</head>
<body>

  <h1>I Ching Hexagram Generator</h1>

  <input type="text" id="question-input" placeholder="ì£¼ì—­ì ì—ê²Œ ë¬¼ì–´ë³´ê³  ì‹¶ì€ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”">
  <br><br>
  <button id="auto-button" onclick="generateRandomHexagram()">ìë™</button>

  <div id="lineArea"></div>

  <div class="hexagram-name-container">
    <div id="hexagramName">ë³¸ê´˜</div>
    <div id="jiHexagramName">ì§€ê´˜</div>
  </div>

  <script>
    const hexagramNames = {
      "ê±´ê±´":"1. ì¤‘ì²œê±´", "ê³¤ê³¤":"2. ì¤‘ì§€ê³¤", "ê°ì§„":"3. ìˆ˜ë¢°ë‘”", "ê°„ê°":"4. ì‚°ìˆ˜ëª½",
      "ê°ê±´":"5. ìˆ˜ì²œìˆ˜", "ê±´ê°":"6. ì²œìˆ˜ì†¡", "ê³¤ê°":"7. ì§€ìˆ˜ì‚¬", "ê°ê³¤":"8. ìˆ˜ì§€ë¹„",
      "ì†ê±´":"9. í’ì²œì†Œì¶•", "ê±´íƒœ":"10. ì²œíƒë¦¬", "ê³¤ê±´":"11. ì§€ì²œíƒœ", "ê±´ê³¤":"12. ì²œì§€ë¹„",
      "ê±´ë¦¬":"13. ì²œí™”ë™ì¸", "ë¦¬ê±´":"14. í™”ì²œëŒ€ìœ ", "ê³¤ê°„":"15. ì§€ì‚°ê²¸", "ì§„ê³¤":"16. ë‡Œì§€ì˜ˆ",
      "íƒœì§„":"17. íƒë¢°ìˆ˜", "ê°„ì†":"18. ì‚°í’ê³ ", "ê³¤íƒœ":"19. ì§€íƒë¦¼", "ì†ê³¤":"20. í’ì§€ê´€",
      "ë¦¬ì§„":"21. í™”ë¢°ì„œí•©", "ê°„ë¦¬":"22. ì‚°í™”ë¹„", "ê°„ê³¤":"23. ì‚°ì§€ë°•", "ê³¤ì§„":"24. ì§€ë¢°ë³µ",
      "ê±´ì§„":"25. ì²œë¢°ë¬´ë§", "ê°„ê±´":"26. ì‚°ì²œëŒ€ì¶•", "ê°„ì§„":"27. ì‚°ë¢°ì´", "íƒœì†":"28. íƒí’ëŒ€ê³¼",
      "ê°ê°":"29. ì¤‘ìˆ˜ê°", "ë¦¬ë¦¬":"30. ì¤‘í™”ë¦¬", "íƒœê°„":"31. íƒì‚°í•¨", "ì§„ì†":"32. ë‡Œí’í•­",
      "ê±´ê°„":"33. ì²œì‚°ë‘”", "ì§„ê±´":"34. ë‡Œì²œëŒ€ì¥", "ë¦¬ê³¤":"35. í™”ì§€ì§„", "ê³¤ë¦¬":"36. ì§€í™”ëª…ì´",
      "ì†ë¦¬":"37. í’í™”ê°€ì¸", "ë¦¬íƒœ":"38. í™”íƒê·œ", "ê°ê°„":"39. ìˆ˜ì‚°ê±´", "ì§„ê°":"40. ë‡Œìˆ˜í•´",
      "ê°„íƒœ":"41. ì‚°íƒì†", "ì†ì§„":"42. í’ë¢°ìµ", "íƒœê±´":"43. íƒì²œì¾Œ", "ê±´ì†":"44. ì²œí’êµ¬",
      "íƒœê³¤":"45. íƒì§€ì·Œ", "ê³¤ì†":"46. ì§€í’ìŠ¹", "íƒœê°":"47. íƒìˆ˜ê³¤", "ê°ì†":"48. ìˆ˜í’ì •",
      "íƒœë¦¬":"49. íƒí™”í˜", "ë¦¬ì†":"50. í™”í’ì •", "ì§„ì§„":"51. ì¤‘ë¢°ì§„", "ê°„ê°„":"52. ì¤‘ì‚°ê°„",
      "ì†ê°„":"53. í’ì‚°ì ", "ì§„íƒœ":"54. ë‡Œíƒê·€ë§¤", "ì§„ë¦¬":"55. ë‡Œí™”í’", "ë¦¬ê°„":"56. í™”ì‚°ë ¤",
      "ì†ì†":"57. ì†ìœ„í’", "íƒœíƒœ":"58. íƒœìœ„íƒ", "ì†ê°":"59. í’ìˆ˜í™˜", "ê°íƒœ":"60. ìˆ˜íƒì ˆ",
      "ì†íƒœ":"61. í’íƒì¤‘ë¶€", "ì§„ê°„":"62. ë‡Œì‚°ì†Œê³¼", "ê°ë¦¬":"63. ìˆ˜í™”ê¸°ì œ", "ë¦¬ê°":"64. í™”ìˆ˜ë¯¸ì œ"
    };

    function getClass(value, isJiGwae) {
      if (!isJiGwae) {
        if (value === '1') return 'solid blue';
        if (value === '8') return 'broken blue';
        if (['4', '6', '7'].includes(value)) return 'solid';
        return 'broken';
      }
      if (value === '1') return 'broken';
      if (value === '8') return 'solid';
      if (['4', '6', '7'].includes(value)) return 'solid';
      return 'broken';
    }

    function getTrigram(lines) {
      return lines.map(v => ['1', '4', '6', '7'].includes(v) ? 'solid' : 'broken').join(',');
    }

    function trigramToSymbol(tri) {
      const map = {
        "solid,solid,solid": "ê±´", "broken,broken,broken": "ê³¤",
        "broken,solid,broken": "ê°", "solid,broken,solid": "ë¦¬",
        "solid,solid,broken": "íƒœ", "broken,solid,solid": "ì†",
        "solid,broken,broken": "ì§„", "broken,broken,solid": "ê°„"
      };
      return map[tri] || "";
    }

    function renderLine(type) {
      const wrapper = document.createElement("div");
      wrapper.className = "line-box";
      if (type.startsWith("solid")) {
        const div = document.createElement("div");
        div.className = "solid-line" + (type.includes("blue") ? " blue" : "");
        wrapper.appendChild(div);
      } else {
        const broken = document.createElement("div");
        broken.className = "broken-line";
        const left = document.createElement("div");
        const right = document.createElement("div");
        left.className = right.className = "broken-segment" + (type.includes("blue") ? " blue" : "");
        broken.appendChild(left);
        broken.appendChild(right);
        wrapper.appendChild(broken);
      }
      return wrapper;
    }

    function updateHexagram() {
      const lines = [];
      for (let i = 1; i <= 6; i++) {
        lines.push(document.getElementById('line' + i).value);
      }

      const lower = trigramToSymbol(getTrigram(lines.slice(0, 3)));
      const upper = trigramToSymbol(getTrigram(lines.slice(3, 6)));
      const hexKey = upper + lower;

      const changed = lines.map(v => {
        if (v === '1') return '8';
        if (v === '8') return '1';
        return v;
      });

      const lowerJi = trigramToSymbol(getTrigram(changed.slice(0, 3)));
      const upperJi = trigramToSymbol(getTrigram(changed.slice(3, 6)));
      const jiKey = upperJi + lowerJi;

      for (let i = 6; i >= 1; i--) {
        const val = document.getElementById('line' + i).value;
        document.getElementById('bonGwae' + i).innerHTML = '';
        document.getElementById('jiGwae' + i).innerHTML = '';
        document.getElementById('bonGwae' + i).appendChild(renderLine(getClass(val, false)));
        document.getElementById('jiGwae' + i).appendChild(renderLine(getClass(val, true)));
      }

      document.getElementById('hexagramName').textContent = hexagramNames[hexKey] || hexKey;
      document.getElementById('jiHexagramName').textContent = hexagramNames[jiKey] || jiKey;
    }

    function generateRandomHexagram() {
      for (let i = 1; i <= 6; i++) {
        const rand = Math.floor(Math.random() * 8) + 1;
        document.getElementById('line' + i).value = rand;
      }
      updateHexagram();
    }

    const lineArea = document.getElementById('lineArea');
    for (let i = 6; i >= 1; i--) {
      const row = document.createElement("div");
      row.className = "line-row";

      const select = document.createElement("select");
      select.id = "line" + i;
      select.innerHTML = `
        <option value="1">1: ê±´ì²œ</option>
        <option value="2">2: íƒœíƒ</option>
        <option value="3">3: ë¦¬í™”</option>
        <option value="4" selected>4: ë‡Œì§„</option>
        <option value="5">5: ì†í’</option>
        <option value="6">6: ê°ìˆ˜</option>
        <option value="7">7: ê°„ì‚°</option>
        <option value="8">8: ê³¤ì§€</option>
      `;
      select.onchange = updateHexagram;

      const bon = document.createElement("div");
      bon.id = "bonGwae" + i;
      const ji = document.createElement("div");
      ji.id = "jiGwae" + i;

      row.appendChild(select);
      row.appendChild(bon);
      row.appendChild(ji);
      lineArea.appendChild(row);
    }

    updateHexagram();
  </script>

  <!-- ğŸ‘‰ ì¶”ê°€ëœ CTA ìŠ¤í¬ë¦½íŠ¸ + í‘¸í„° ì‹œì‘ -->
  <script>
    function goToBlog() {
      const q   = document.getElementById('question-input') ? document.getElementById('question-input').value : 'ì§ˆë¬¸ ì—†ìŒ';
      const bon = document.getElementById('hexagramName')   ? document.getElementById('hexagramName').textContent : '';
      const ji  = document.getElementById('jiHexagramName') ? document.getElementById('jiHexagramName').textContent : '';

      const comment = `[ì£¼ì—­ì  ê²°ê³¼ ê³µìœ ]
ë³¸ê´˜ : ${bon}
ì§€ê´˜ : ${ji}
ì§ˆë¬¸ : ${q}
ê°ì‚¬í•©ë‹ˆë‹¤!`;

      if (navigator.clipboard) {
        navigator.clipboard.writeText(comment).then(() => {
          window.open('https://blog.naver.com/deepmeta/223944469688#comment', '_blank');
        });
      } else {
        window.open('https://blog.naver.com/deepmeta/223944469688#comment', '_blank');
        alert('í´ë¦½ë³´ë“œ ë³µì‚¬ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤. ëŒ“ê¸€ì°½ì—ì„œ Ctrl+Vë¡œ ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”.');
      }
    }
  </script>

  <footer style="margin:40px 0; text-align:center;">
    <button onclick="goToBlog()" style="padding:12px 24px; font-size:16px; cursor:pointer;">
      ğŸ”®Â ê²°ê³¼ ê³µìœ í•˜ê³  ë¸”ë¡œê·¸ ëŒ“ê¸€ ë‹¬ê¸°
    </button>
    <p style="font-size:13px; margin-top:8px;">
      (ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²°ê³¼ ë¬¸êµ¬ê°€ í´ë¦½ë³´ë“œì— ì €ì¥ë˜ê³ &nbsp;ë¸”ë¡œê·¸ ëŒ“ê¸€ì°½ì´ ìƒˆ íƒ­ìœ¼ë¡œ ì—´ë¦½ë‹ˆë‹¤)
    </p>
  </footer>
  <!-- ğŸ‘† ì¶”ê°€ëœ CTA ìŠ¤í¬ë¦½íŠ¸ + í‘¸í„° ë -->

</body>
</html>
